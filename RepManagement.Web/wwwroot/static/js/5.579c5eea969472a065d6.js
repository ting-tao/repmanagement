webpackJsonp([5],{Yew0:function(t,e){},YzDs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),r=a.n(l),i={data:function(){return{tableData:[],curCategoryId:null,curVendorId:null,dialogmaterial:!1,editMaterialIndex:-1,imageUrl:"",filter:{SerialNum:"",Color:"",Spec:"",TypeID:"",VendorID:"",Weight:""},formData:{SerialNum:"",TypeID:"",VendorID:"",MaterialQuality:"",Spec:"",OpenSize:"",Weight:"",ColorNum:"",Color:"",Price:"",LeftCount:"",IconID:"",Id:""},rules:{TypeName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],DicTypeID:[{message:"请选择字典类别",validator:function(t,e,a){e?a():a(new Error("字典类型不能为空"))}}]},vendorList:[],materialCategoryList:[]}},methods:{addMaterial:function(){this.editMaterialIndex=-1,this.dialogmaterial=!0},editMaterial:function(t,e){this.imageUrl="",this.formData=r()({},t),this.formData.IconID&&(this.imageUrl="/api/image?imgId="+this.formData.IconID+"&date="+new Date),this.editMaterialIndex=this.tableData.indexOf(t),this.dialogmaterial=!0},handleDelete:function(t,e){var a=this;this.$http.get("/api/material/DeleteItem?materialId="+t.Id).then(function(e){var l=e.data;if(1==l.ReturnCode){var r=a.tableData.indexOf(t);a.tableData.splice(r,1)}else a.$alert(l.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},saveMaterial:function(t){var e=this;this.$http.post("/api/material",e.formData).then(function(t){var a=t.data;if(1==a.ReturnCode){var l=a.Data;-1==e.editMaterialIndex?e.tableData.push(l):e.tableData.splice(e.editMaterialIndex,1,l),e.dialogmaterial=!1,e.editMaterialIndex=-1,e.formData={}}else e.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},getVendorList:function(){var t=this;this.$http.get("/api/vendor/GetVendorForMaterial").then(function(e){var a=e.data;1==a.ReturnCode?t.vendorList=a.Data:t.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},getMaterialCategoryList:function(){var t=this;this.$http.get("/api/dict/GetDictByType?typeId=100").then(function(e){var a=e.data;1==a.ReturnCode?t.materialCategoryList=a.Data:t.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},getMaterialList:function(){var t=this;this.$http.get("/api/material/GetMaterialList").then(function(e){var a=e.data;1==a.ReturnCode?t.tableData=a.Data:t.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},handleAvatarSuccess:function(t,e){1==t.ReturnCode?(this.formData.IconID=t.Data,this.imageUrl=URL.createObjectURL(e.raw)):this.imageUrl=""},beforeAvatarUpload:function(t){var e="image/png"===t.type||"image/jpg"===t.type;return e||this.$message.error("上传头像图片只能是 JPG/png 格式!"),e&&!0}},mounted:function(){this.getVendorList(),this.getMaterialCategoryList(),this.getMaterialList()},computed:{fiteredTableData:function(){var t=this;return this.tableData.filter(function(e){return!(null!=t.curCategoryId&&e.TypeID!=t.curCategoryId||null!=t.curVendorId&&t.curVendorId!=e.VendorID)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dicttable dict-manager"},[a("table",{staticClass:"filter_table",attrs:{cellspacing:"0",cellpadding:"0"}},[a("tbody",[a("tr",{staticClass:"ct tb-tr"},[a("td",{staticClass:"name"},[t._v("编号：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-input",{staticClass:"w220",attrs:{clearable:""}})],1),t._v(" "),a("td",{staticClass:"name"},[t._v("色号：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-input",{staticClass:"w220",attrs:{clearable:""}})],1),t._v(" "),a("td",{staticClass:"name"},[t._v("规格：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-input",{staticClass:"w220",attrs:{clearable:""}})],1)]),t._v(" "),a("tr",{staticClass:"ct tb-tr"},[a("td",{staticClass:"name"},[t._v("物料类别：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择物料类别",filterable:""},on:{change:t.getMaterialList,clear:t.getMaterialList},model:{value:t.curCategoryId,callback:function(e){t.curCategoryId=e},expression:"curCategoryId"}},t._l(t.materialCategoryList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id}})}))],1),t._v(" "),a("td",{staticClass:"name"},[t._v("所属供应商:")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择供应商",filterable:""},on:{change:t.getMaterialList,clear:t.getMaterialList},model:{value:t.curVendorId,callback:function(e){t.curVendorId=e},expression:"curVendorId"}},t._l(t.vendorList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.VendorName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.VendorName))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.SerialNum))])])}))],1),t._v(" "),a("td",{staticClass:"name"},[t._v("克重：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-input",{staticClass:"w220",attrs:{clearable:""}})],1)])])]),t._v(" "),a("div",{staticClass:"inquire",staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"added demand-add",attrs:{type:"primary"},on:{click:function(e){t.addMaterial()}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增物料\n    ")]),t._v(" "),a("el-button",{staticClass:"demand",attrs:{type:"primary"},on:{click:function(e){t.getMaterialList()}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 搜索\n    ")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"singleTable",attrs:{data:t.fiteredTableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"图文",width:"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.IconID?a("img",{staticStyle:{width:"50px",heigh:"50px"},attrs:{src:"/api/image?imgId="+e.row.IconID}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",fixed:"",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"SerialNum",label:"编号",width:"80",fixed:"",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"TypeName",label:"物料类别",width:"auto",fixed:"",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"VendorNum",label:"供应商",width:"100",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"MaterialQuality",label:"材质",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"Spec",label:"规格",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"OpenSize",label:"开边尺寸",width:"100",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"Weight",label:"克重",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"ColorNum",label:"色号",width:"100",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"Color",label:"颜色",width:"100",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"Price",label:"单价",width:"100",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"LeftCount",label:"库存",width:"100",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit green operation",on:{click:function(a){t.editMaterial(e.row,e.$index)}}}),t._v(" "),a("span",{staticClass:"slash"}),t._v(" "),a("i",{staticClass:"el-icon-delete2 green operation",on:{click:function(a){t.handleDelete(e.row,e.$index)}}})]}}])})],1)],1),t._v(" "),a("el-dialog",{staticClass:"material-dlg",attrs:{title:-1==t.editMaterialIndex?"新增":"编辑",visible:t.dialogmaterial},on:{"update:visible":function(e){t.dialogmaterial=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"材料编号","label-width":"120px",prop:"SerialNum"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.SerialNum,callback:function(e){t.$set(t.formData,"SerialNum",e)},expression:"formData.SerialNum"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"材料类别","label-width":"120px",prop:"TypeID"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择材料类别"},model:{value:t.formData.TypeID,callback:function(e){t.$set(t.formData,"TypeID",e)},expression:"formData.TypeID"}},t._l(t.materialCategoryList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"供应商","label-width":"120px",prop:"VendorID"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择供应商"},model:{value:t.formData.VendorID,callback:function(e){t.$set(t.formData,"VendorID",e)},expression:"formData.VendorID"}},t._l(t.vendorList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.VendorName,value:e.Id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.VendorName))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.SerialNum))])])}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"物料材质","label-width":"120px",prop:"MaterialQuality"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.MaterialQuality,callback:function(e){t.$set(t.formData,"MaterialQuality",e)},expression:"formData.MaterialQuality"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"规格","label-width":"120px",prop:"Spec"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.Spec,callback:function(e){t.$set(t.formData,"Spec",e)},expression:"formData.Spec"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"开边尺寸","label-width":"120px",prop:"OpenSize"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.OpenSize,callback:function(e){t.$set(t.formData,"OpenSize",e)},expression:"formData.OpenSize"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"克重","label-width":"120px",prop:"Weight"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.Weight,callback:function(e){t.$set(t.formData,"Weight",e)},expression:"formData.Weight"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"色卡号","label-width":"120px",prop:"ColorNum"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.ColorNum,callback:function(e){t.$set(t.formData,"ColorNum",e)},expression:"formData.ColorNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"颜色","label-width":"120px",prop:"Color"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.Color,callback:function(e){t.$set(t.formData,"Color",e)},expression:"formData.Color"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"单价","label-width":"120px",prop:"Price"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.Price,callback:function(e){t.$set(t.formData,"Price",e)},expression:"formData.Price"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"库存量","label-width":"120px",prop:"LeftCount"}},[a("el-input",{staticStyle:{},attrs:{autocomplete:"off"},model:{value:t.formData.LeftCount,callback:function(e){t.$set(t.formData,"LeftCount",e)},expression:"formData.LeftCount"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"图片","label-width":"120px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/material/UploadMaterialImg?isFlag=true","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,data:t.formData}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogmaterial=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveMaterial("formData")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(t){a("Yew0")},null,null);e.default=s.exports}});
//# sourceMappingURL=5.579c5eea969472a065d6.js.map