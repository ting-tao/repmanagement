webpackJsonp([11],{m6qX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),o=a.n(l),r=a("IqEw"),i={data:function(){return{tableData:[],categoryTypeList:r.a,curStypeTypeId:null,curMatTypeId:null,curMouldId:null,dialogProduction:!1,dialogTitle:"新增",editItemIndex:-1,dialogUploadImg:!1,uploadPicParam:{prodId:""},prodPicList:[],formData:{},rules:{TypeName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],DicTypeID:[{message:"请选择字典类别",validator:function(t,e,a){e?a():a(new Error("字典类型不能为空"))}}]},vendorTypeList:[],vendorList:[],styleTypeList:[],matTypeList:[],mouldList:[],customerList:[]}},methods:{getDataList:function(){var t=this;this.$http.get("/api/production/GetProductionList").then(function(e){var a=e.data;1==a.ReturnCode?t.tableData=a.Data:t.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},addProduction:function(){this.dialogTitle="新增",this.dialogProduction=!0,this.editItemIndex=-1},editProduction:function(t,e){this.formData=o()({},t),this.dialogTitle="编辑",this.editItemIndex=this.tableData.indexOf(t),this.dialogProduction=!0},handleDelete:function(t,e){var a=this;this.$http.get("/api/production/DeleteProduction?itemId="+t.Id).then(function(e){var l=e.data;if(1==l.ReturnCode){var o=a.tableData.indexOf(t);a.tableData.splice(o,1)}else a.$alert(l.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},saveProduction:function(t){var e=this;this.$http.post("/api/production",e.formData).then(function(t){var a=t.data;if(1==a.ReturnCode){var l=a.Data;-1==e.editItemIndex?e.tableData.push(l):e.tableData.splice(e.editItemIndex,1,l),e.dialogProduction=!1,e.editItemIndex=-1,e.formData={}}else e.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},getProductionSelectData:function(){var t=this;this.$http.get("/api/production/GetProductionSelectData").then(function(e){var a=e.data;if(1==a.ReturnCode){var l=a.Data;t.styleTypeList=l.StyleTypeList,t.matTypeList=l.MatTypeList,t.vendorList=l.VendorList,t.mouldList=l.MouldList,t.customerList=l.CustomerList}else t.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},uploadImg:function(t){this.prodPicList=[],this.dialogUploadImg=!0,this.uploadPicParam.prodId=t,this.loadProdPictureList(t)},handlePictureRemove:function(t,e){var a=t.id;this.$http.get("/api/production/DeleteProductionImg?picId="+a).then(function(t){t.data.ReturnCode},function(t){})},handleUploadSuccess:function(t,e){1==t.ReturnCode?this.prodPicList.push({name:"pic"+this.prodPicList.length,url:"/api/image/ShowProdPic?prodPicId="+t.Data}):this.imageUrl=""},beforePictureUpload:function(t){var e="image/png"===t.type||"image/jpg"===t.type;return e||this.$message.error("上传头像图片只能是 JPG/png 格式!"),e&&!0},loadProdPictureList:function(t){var e=this;this.$http.get("/api/production/GetProdImgList?prodId="+t).then(function(t){var a=t.data;if(1==a.ReturnCode){var l=a.Data;e.prodPicList=l}else e.prodPicList=[],e.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},test:function(){alert("11")}},mounted:function(){this.getProductionSelectData(),this.getDataList()},computed:{fiteredTableData:function(){var t=this;return this.curStypeTypeId?this.tableData.filter(function(e){return e.DicTypeID==t.curStypeTypeId}):this.tableData}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dicttable dict-manager"},[a("table",{staticClass:"filter_table",attrs:{cellspacing:"0",cellpadding:"0"}},[a("tbody",[a("tr",{staticClass:"ct tb-tr"},[a("td",{staticClass:"name"},[t._v("款号：")]),t._v(" "),a("td",[a("el-input",{staticClass:"w220",attrs:{clearable:""}})],1),t._v(" "),a("td",{staticClass:"name"},[t._v("款式 ：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择供款式",filterable:"",clearable:""},on:{change:t.getDataList,clear:t.getDataList},model:{value:t.curStypeTypeId,callback:function(e){t.curStypeTypeId=e},expression:"curStypeTypeId"}},t._l(t.styleTypeList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id}})}))],1),t._v(" "),a("td",{staticClass:"name"},[t._v("材质 ：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择供材质",filterable:"",clearable:""},on:{change:t.getDataList,clear:t.getDataList},model:{value:t.curMatTypeId,callback:function(e){t.curMatTypeId=e},expression:"curMatTypeId"}},t._l(t.matTypeList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id}})}))],1),t._v(" "),a("td",{staticClass:"name"},[t._v("模具 ：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择供模具",filterable:"",clearable:""},on:{change:t.getDataList,clear:t.getDataList},model:{value:t.curMouldId,callback:function(e){t.curMouldId=e},expression:"curMouldId"}},t._l(t.mouldList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id}})}))],1)])])]),t._v(" "),a("div",{staticClass:"inquire"},[a("el-button",{staticClass:"added demand-add",attrs:{type:"primary"},on:{click:function(e){t.addProduction()}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增成品\n    ")]),t._v(" "),a("el-button",{staticClass:"demand",attrs:{type:"primary"},on:{click:function(e){t.getDataList()}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 搜索\n    ")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"singleTable",attrs:{data:t.fiteredTableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"SerialNum",label:"编号",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"MatTypeName",label:"材质",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"StyleTypeName",label:"款式",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"Color",label:"颜色",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"Size",label:"帽围",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"MouldNum",label:"模具",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"ProcessCost",label:"加工费",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"MainVendorNum",label:"主料供应商",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"MainCost",label:"主料成本",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"DecorateVendorNum",label:"装饰供应商",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"DecorateCost",label:"装饰成本",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"SweatbandVendorNum",label:"汗带供应商",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"SweatbandCost",label:"汗带成本",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"PacketCost",label:"包装成本",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"TransportCost",label:"运输成本",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"TotalCost",label:"总成本",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"CustomerNum",label:"定款客户",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户操作",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit green operation",on:{click:function(a){t.editProduction(e.row,e.$index)}}}),t._v(" "),a("span",{staticClass:"slash"}),t._v(" "),a("i",{staticClass:"el-icon-delete2 green operation",on:{click:function(a){t.handleDelete(e.row,e.$index)}}}),t._v(" "),a("span",{staticClass:"slash"}),t._v(" "),a("i",{staticClass:"el-icon-upload green operation",on:{click:function(a){t.uploadImg(e.row.Id)}}})]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogProduction},on:{"update:visible":function(e){t.dialogProduction=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"编号","label-width":"120px",prop:"SerialNum"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.SerialNum,callback:function(e){t.$set(t.formData,"SerialNum",e)},expression:"formData.SerialNum"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"材质","label-width":"120px",prop:"MatTypeId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择成品材质"},model:{value:t.formData.MatTypeId,callback:function(e){t.$set(t.formData,"MatTypeId",e)},expression:"formData.MatTypeId"}},t._l(t.matTypeList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id,clearable:""}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"款式","label-width":"120px",prop:"StyleTypeId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择成品款式"},model:{value:t.formData.StyleTypeId,callback:function(e){t.$set(t.formData,"StyleTypeId",e)},expression:"formData.StyleTypeId"}},t._l(t.styleTypeList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.TypeName,value:t.Id,clearable:""}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"颜色","label-width":"120px",prop:"Color"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.Color,callback:function(e){t.$set(t.formData,"Color",e)},expression:"formData.Color"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"帽围","label-width":"120px",prop:"Size"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.Size,callback:function(e){t.$set(t.formData,"Size",e)},expression:"formData.Size"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"模具","label-width":"120px",prop:"MouldId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择模具"},model:{value:t.formData.MouldId,callback:function(e){t.$set(t.formData,"MouldId",e)},expression:"formData.MouldId"}},t._l(t.mouldList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.SerialNum,value:t.Id,clearable:""}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"加工费","label-width":"120px",prop:"ProcessCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.ProcessCost,callback:function(e){t.$set(t.formData,"ProcessCost",e)},expression:"formData.ProcessCost"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"主料供应商","label-width":"120px",prop:"MainVendorId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择主料供应商"},model:{value:t.formData.MainVendorId,callback:function(e){t.$set(t.formData,"MainVendorId",e)},expression:"formData.MainVendorId"}},t._l(t.vendorList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.SerialNum,value:t.Id,clearable:""}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"主料成本","label-width":"120px",prop:"MainCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.MainCost,callback:function(e){t.$set(t.formData,"MainCost",e)},expression:"formData.MainCost"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"装饰供应商","label-width":"120px",prop:"DecorateVendorId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择装饰供应商"},model:{value:t.formData.DecorateVendorId,callback:function(e){t.$set(t.formData,"DecorateVendorId",e)},expression:"formData.DecorateVendorId"}},t._l(t.vendorList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.SerialNum,value:t.Id,clearable:""}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"装饰成本","label-width":"120px",prop:"DecorateCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.DecorateCost,callback:function(e){t.$set(t.formData,"DecorateCost",e)},expression:"formData.DecorateCost"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"汗带供应商","label-width":"120px",prop:"SweatbandVendorId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择汗带供应商"},model:{value:t.formData.SweatbandVendorId,callback:function(e){t.$set(t.formData,"SweatbandVendorId",e)},expression:"formData.SweatbandVendorId"}},t._l(t.vendorList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.SerialNum,value:t.Id,clearable:""}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"汗带成本","label-width":"120px",prop:"SweatbandCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.SweatbandCost,callback:function(e){t.$set(t.formData,"SweatbandCost",e)},expression:"formData.SweatbandCost"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"包装成本","label-width":"120px",prop:"PacketCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.PacketCost,callback:function(e){t.$set(t.formData,"PacketCost",e)},expression:"formData.PacketCost"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"运输成本","label-width":"120px",prop:"TransportCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off"},model:{value:t.formData.TransportCost,callback:function(e){t.$set(t.formData,"TransportCost",e)},expression:"formData.TransportCost"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"总成本","label-width":"120px",prop:"TotalCost"}},[a("el-input",{staticClass:"w220",attrs:{autocomplete:"off",readonly:""},model:{value:t.formData.TotalCost,callback:function(e){t.$set(t.formData,"TotalCost",e)},expression:"formData.TotalCost"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"定款客户","label-width":"120px",prop:"CustomerId"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择汗带供应商"},model:{value:t.formData.CustomerId,callback:function(e){t.$set(t.formData,"CustomerId",e)},expression:"formData.CustomerId"}},t._l(t.customerList,function(t){return a("el-option",{key:t.Id,attrs:{label:t.SerialNum,value:t.Id,clearable:""}})}))],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogProduction=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveProduction("formData")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"成品图片",visible:t.dialogUploadImg},on:{"update:visible":function(e){t.dialogUploadImg=e}}},[[a("el-upload",{attrs:{action:"/api/production/UploadProductionImg","list-type":"picture-card","on-remove":t.handlePictureRemove,"before-remove":t.test,"on-success":t.handleUploadSuccess,"before-upload":t.beforePictureUpload,data:t.uploadPicParam,"file-list":t.prodPicList}},[a("i",{staticClass:"el-icon-plus"})])],t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogUploadImg=!1}}},[t._v("关 闭")])],1)],2)],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("nPa4")},null,null);e.default=n.exports},nPa4:function(t,e){}});
//# sourceMappingURL=11.e1a86852cc0dc7fa9077.js.map