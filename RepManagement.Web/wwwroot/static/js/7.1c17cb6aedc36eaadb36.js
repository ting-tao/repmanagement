webpackJsonp([7],{"54Kl":function(t,e){},"c/nG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),l=a.n(i),n=a("IqEw"),o=(a("LqIw"),{data:function(){return{tableData:[],categoryTypeList:n.a,curCategoryType:null,dialogdict:!1,editDictIndex:-1,formData:{DicTypeID:"",TypeName:"",Description:"",Id:"",region:""},rules:{TypeName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],DicTypeID:[{message:"请选择字典类别",validator:function(t,e,a){e?a():a(new Error("字典类型不能为空"))}}]}}},methods:{getDataList:function(){var t=this;this.$http.get("/api/dict").then(function(e){var a=e.data;1==a.ReturnCode?t.tableData=a.Data.map(function(e){return e.DictTypeName=t.categoryTypeList[e.DicTypeID-100].name,e}):t.$alert(a.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},addDict:function(){this.formData={},this.dialogdict=!0,this.editDictIndex=-1},editDict:function(t){this.formData=l()({},t),this.editDictIndex=this.tableData.indexOf(t),this.dialogdict=!0},handleDelete:function(t,e){var a=this;this.$http.get("/api/dict/DeleteDict?id="+t.Id).then(function(e){var i=e.data;if(1==i.ReturnCode){var l=a.tableData.indexOf(t);a.tableData.splice(l,1)}else a.$alert(i.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})},saveDict:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$http.post("/api/dict",a.formData).then(function(t){var e=t.data;if(1==e.ReturnCode){var i=e.Data;i.DictTypeName=a.categoryTypeList[i.DicTypeID-100].name,-1===a.editDictIndex?a.tableData.push(i):a.tableData.splice(a.editDictIndex,1,i),a.dialogdict=!1,a.formData={}}else a.$alert(e.Message," ",{type:"info",confirmButtonText:"确定"})},function(t){console.log(t)})})}},mounted:function(){this.getDataList()},computed:{fiteredTableData:function(){var t=this;return this.curCategoryType?this.tableData.filter(function(e){return e.DicTypeID==t.curCategoryType}):this.tableData}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dicttable dict-manager"},[a("table",{staticClass:"filter_table",attrs:{cellspacing:"0",cellpadding:"0"}},[a("tbody",[a("tr",{staticClass:"ct tb-tr"},[a("td",{staticClass:"name"},[t._v("字典类别 ：")]),t._v(" "),a("td",{staticStyle:{padding:"5px 0"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择字典类别",filterable:"",clearable:""},on:{change:t.getDataList,clear:t.getDataList},model:{value:t.curCategoryType,callback:function(e){t.curCategoryType=e},expression:"curCategoryType"}},t._l(t.categoryTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])])]),t._v(" "),a("div",{staticClass:"inquire"},[a("el-button",{staticClass:"added demand-add",attrs:{type:"primary"},on:{click:function(e){t.addDict()}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增类别\n        ")]),t._v(" "),a("el-button",{staticClass:"demand",attrs:{type:"primary"},on:{click:function(e){t.getDataList()}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 刷新\n        ")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"singleTable",attrs:{data:t.fiteredTableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"DictTypeName",label:"字典类别",width:"120",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{property:"TypeName",label:"显示名称",width:"150",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit green operation",on:{click:function(a){t.editDict(e.row)}}}),t._v(" "),a("span",{staticClass:"slash"}),t._v(" "),a("i",{staticClass:"el-icon-delete2 green operation",on:{click:function(a){t.handleDelete(e.row,e.$index)}}})]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:-1==t.editDictIndex?"新增":"编辑",visible:t.dialogdict},on:{"update:visible":function(e){t.dialogdict=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules}},[a("el-form-item",{attrs:{label:"所属类别","label-width":"120px",prop:"DicTypeID"}},[a("el-select",{staticClass:"w220",attrs:{placeholder:"请选择字典类别"},model:{value:t.formData.DicTypeID,callback:function(e){t.$set(t.formData,"DicTypeID",e)},expression:"formData.DicTypeID"}},t._l(t.categoryTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"显示名称","label-width":"120px",prop:"TypeName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.TypeName,callback:function(e){t.$set(t.formData,"TypeName",e)},expression:"formData.TypeName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":"120px"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.formData.Description,callback:function(e){t.$set(t.formData,"Description",e)},expression:"formData.Description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogdict=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveDict("formData")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,r,!1,function(t){a("54Kl")},null,null);e.default=c.exports}});
//# sourceMappingURL=7.1c17cb6aedc36eaadb36.js.map